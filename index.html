<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pendataan RTLH Kab Kediri 2025</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
  <div class="container py-5">
    <h1 class="text-center mb-4">Dynamic Button List</h1>
    <div id="buttonContainer" class="d-flex flex-wrap gap-2 justify-content-center"></div>
  </div>

  <script>
    async function loadCSVAndGenerateButtons() {
      try {
        const response = await fetch('data.csv');
        if (!response.ok) throw new Error('CSV file not found');

        const csv = await response.text();
        const lines = csv.trim().split('\n');
        const headers = lines[0].split(',');
        const labelIndex = headers.indexOf('Label');
        const linkIndex = headers.indexOf('Link');

        const container = document.getElementById('buttonContainer');
        container.innerHTML = '';

        for (let i = 1; i < lines.length; i++) {
          const cols = lines[i].split(',');

          const label = cols[labelIndex]?.trim();
          const link = cols[linkIndex]?.trim();

          if (label && link) {
            const button = document.createElement('a');
            button.href = link;
            button.className = 'btn btn-primary';
            button.target = '_blank';
            button.textContent = label;
            container.appendChild(button);
          }
        }
      } catch (error) {
        console.error('Error loading CSV:', error);
      }
    }

    // Load CSV when page loads
    window.addEventListener('DOMContentLoaded', loadCSVAndGenerateButtons);
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
